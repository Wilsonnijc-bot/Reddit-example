<div class="hf-post-card" *ngFor="let post of posts">
  <div class="hf-post-header">
    <div class="hf-post-meta">
      <span class="hf-community">h/{{post.subredditName}}</span>
      <span class="hf-dot">â€¢</span>
      <span>{{post.duration}}</span>
    </div>
    <button type="button" class="hf-overflow-btn" aria-label="Post actions">
      <fa-icon [icon]="faEllipsisH"></fa-icon>
    </button>
  </div>

  <div class="hf-post-title">
    <a *ngIf="isExternalLinkPost(post); else noExternalPostLink" class="hf-post-title-link" [href]="post.url" target="_blank" rel="noopener noreferrer">{{post.postName}}</a>
    <ng-template #noExternalPostLink>
      <span>{{post.postName}}</span>
    </ng-template>
  </div>

  <ng-container *ngIf="isMediaPost(post); else textPostBlock">
    <div *ngIf="isVideoPost(post); else imagePostBlock" class="hf-media-wrap">
      <video class="hf-media-content" controls preload="metadata" [src]="post.videoUrl"></video>
      <div class="hf-media-badge">
        <fa-icon [icon]="faPlay"></fa-icon>
        <fa-icon [icon]="faVolumeMute"></fa-icon>
      </div>
    </div>
    <ng-template #imagePostBlock>
      <div class="hf-media-wrap" *ngIf="getImageUrl(post) as imageUrl">
        <img class="hf-media-content" [src]="imageUrl" [alt]="post.postName">
      </div>
    </ng-template>
  </ng-container>

  <ng-template #textPostBlock>
    <p *ngIf="post.description" class="hf-text-preview" [innerHtml]="post.description"></p>
  </ng-template>

  <div class="hf-post-footer">
    <app-vote-button [post]="post"></app-vote-button>

    <button type="button" class="hf-action-btn" (click)="goToPost(post.id)">
      <fa-icon [icon]="faComments"></fa-icon>
      <span>{{post.commentCount}}</span>
    </button>

    <button type="button" class="hf-action-btn">
      <fa-icon [icon]="faHeart"></fa-icon>
      <span>{{post.voteCount}}</span>
    </button>

    <button type="button" class="hf-action-btn" (click)="sharePost(post)">
      <fa-icon [icon]="faShare"></fa-icon>
      <span>Share</span>
    </button>
  </div>
</div>
